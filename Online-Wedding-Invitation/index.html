<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wedding Invitation</title>
    <link rel="stylesheet" href="main.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
      rel="stylesheet" />
  </head>
  <body>
    <div id="root"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script type="text/babel">
      const { useState, useEffect } = React;

      function App() {
        const [activeTab, setActiveTab] = useState(() => {
          if (performance.navigation.type === 1) {
            return "main";
          }
          return "login";
        });

        const [lang, setLang] = React.useState("el");
        const [translations, setTranslations] = React.useState({});

        React.useEffect(() => {
          fetch("translations.json")
            .then((res) => res.json())
            .then((data) => setTranslations(data))
            .catch((err) => console.error("Error loading translations:", err));
        }, []);

        const t = (key) => {
          if (!translations[key]) return key;
          return translations[key][lang] || translations[key]["en"] || key;
        };

        useScrollAnimation(activeTab);

        const renderTab = () => {
          switch (activeTab) {
            case "reserve":
              return <Reserve t={t} onBackClick={() => setActiveTab("main")} />;
            case "main":
              return (
                <Main t={t} onReserveClick={() => setActiveTab("reserve")} />
              );
            case "login":
            default:
              return <Login t={t} onLoginClick={() => setActiveTab("main")} />;
          }
        };

        return (
          <div>
            <div
              style={{
                position: "absolute",
                top: "10px",
                right: "10px",
                zIndex: 10000,
              }}>
              <button
                onClick={() => setLang(lang === "el" ? "en" : "el")}
                style={{
                  padding: "8px 16px",
                  borderRadius: "10px",
                  cursor: "pointer",
                  backgroundColor: "#fff",
                  border: "1px solid #ccc",
                  boxShadow: "0 2px 6px rgba(0,0,0,0.1)",
                }}>
                {lang === "el" ? "English" : "ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨"}
              </button>
            </div>

            <div className="content">{renderTab()}</div>
          </div>
        );
      }

      function useScrollAnimation(resetKey) {
        React.useEffect(() => {
          const hiddenElements = document.querySelectorAll(".hidden, .hidden2");

          // Reset animation
          hiddenElements.forEach((el) => el.classList.remove("show"));

          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  entry.target.classList.add("show");
                }
              });
            },
            { threshold: 0.1 }
          );

          hiddenElements.forEach((el) => observer.observe(el));

          return () => observer.disconnect();
        }, [resetKey]);
      }

      function Login({ onLoginClick, t }) {
        React.useEffect(() => {
          window.scrollTo(0, 0);
        }, []);

        const correctPassword = "06062026";

        const handleSubmit = (event) => {
          event.preventDefault();
          const userPassword = event.target.password.value;

          if (userPassword === correctPassword) {
            onLoginClick();
          } else {
            alert(t("access_denied"));
            event.target.password.value = "";
          }
        };

        return (
          <section id="login" className="login-page">
            <link rel="stylesheet" href="login.css?v=2" />
            <div className="form-container">
              <form id="passwordForm" onSubmit={handleSubmit}>
                <h3>{t("entry_code")}</h3>
                <h3>{t("what_date")}</h3>
                <input
                  type="password"
                  id="passwordInput"
                  name="password"
                  required
                  placeholder={t("answer")}
                />
                <input
                  type="submit"
                  value={t("continue")}
                  className="form-btn"
                />
              </form>
            </div>
          </section>
        );
      }

      function Main({ onReserveClick, t }) {
        const [isAdmin, setIsAdmin] = useState(false);

        useEffect(() => {
          if (localStorage.getItem("isAdmin") === "true") {
            setIsAdmin(true);
          }
        }, []);

        return (
          <section id="main" className="main-page">
            <div className="invitation-content">
              <div className="sticky-hero">
                <div className="sticky-hero-photo" aria-hidden="true"></div>
                <div className="arrow bounce">
                  <a className="fa fa-arrow-down fa-2x" href="#"></a>
                </div>
                <div className="sticky-hero-content">
                  <div className="container-title">
                    <h1>{t("title_names")}</h1>
                    <p className="subtitle hidden2" translate="no">
                      Save the Date
                    </p>
                    <br></br>
                    <p className="subtitle-date hidden2">06.06.2026</p>
                  </div>
                </div>
              </div>

              <div className="thanks hidden">
                <h2>{t("congratulations")}</h2>
              </div>
              <div className="thanks hidden">
                <h3>{t("thanks1")}</h3>
              </div>
              <div className="thanks hidden">
                <h3>{t("thanks2")}</h3>
              </div>

              <div className="calendar hidden">
                <link rel="stylesheet" href="calendar.css" />
                <div className="calendar__title hidden">
                  <h2>{t("wedding_date_title")}</h2>
                  <h1>{t("wedding_date")}</h1>
                </div>
                <br></br>
                <div className="calendar__date hidden">
                  <div className="calendar__day">{t("date1")}</div>
                  <div className="calendar__day">{t("date2")}</div>
                  <div className="calendar__day">{t("date3")}</div>
                  <div className="calendar__day">{t("date4")}</div>
                  <div className="calendar__day">{t("date5")}</div>
                  <div className="calendar__day">{t("date6")}</div>
                  <div className="calendar__day">{t("date7")}</div>
                  <div className="calendar__number">1</div>
                  <div className="calendar__number">2</div>
                  <div className="calendar__number">3</div>
                  <div className="calendar__number">4</div>
                  <div className="calendar__number">5</div>
                  <div className="calendar__number calendar__number--current">
                    6
                  </div>
                  <div className="calendar__number">7</div>
                  <div className="calendar__number">8</div>
                  <div className="calendar__number">9</div>
                  <div className="calendar__number">10</div>
                  <div className="calendar__number">11</div>
                  <div className="calendar__number">12</div>
                  <div className="calendar__number">13</div>
                  <div className="calendar__number">14</div>
                  <div className="calendar__number">15</div>
                  <div className="calendar__number">16</div>
                  <div className="calendar__number">17</div>
                  <div className="calendar__number">18</div>
                  <div className="calendar__number">19</div>
                  <div className="calendar__number">20</div>
                  <div className="calendar__number">21</div>
                  <div className="calendar__number">22</div>
                  <div className="calendar__number">23</div>
                  <div className="calendar__number">24</div>
                  <div className="calendar__number">25</div>
                  <div className="calendar__number">26</div>
                  <div className="calendar__number">27</div>
                  <div className="calendar__number">28</div>
                  <div className="calendar__number">29</div>
                  <div className="calendar__number">30</div>
                </div>
              </div>
            </div>

            <div className="info-wrapper">
              <div className="info-container hidden">
                <div className="info-container hidden">
                  <div className="timeline-container">
                    <h2 className="timeline-title">{t("timeline_title")}</h2>
                    <ul className="timeline">
                      <li className="timeline-item hidden">
                        <div className="timeline-marker"></div>
                        <div className="timeline-content">
                          <div className="timeline-icon">&#128141;</div>
                          <div className="timeline-time">5:00 ŒºŒº</div>
                          <div className="timeline-event">{t("ceremony")}</div>
                          <div className="timeline-location">
                            {t("ceremony_location")}
                          </div>
                        </div>
                      </li>
                      <li className="timeline-item hidden">
                        <div className="timeline-marker"></div>
                        <div className="timeline-content">
                          <div className="timeline-icon">&#129346;</div>
                          <div className="timeline-time">6:30 ŒºŒº</div>
                          <div className="timeline-event">{t("party")}</div>
                          <div className="timeline-location">
                            {t("party_location")}
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>

                {/* üìç Location Map */}
                <div className="map-point hidden">
                  <a
                    href=""
                    target="_blank"
                    rel="noopener noreferrer"
                    className="map-icon">
                    <i className="fas fa-map-marker-alt"></i>
                  </a>
                </div>

                <div className="map-container hidden">
                  <h2>{t("where_are_we_going")}</h2>
                </div>

                <div className="map-container hidden">
                  <h3>{t("church")}</h3>
                  <img
                    src="images_fonts/church6.png"
                    alt=""
                    style={{ marginBottom: "30px", borderRadius: "20px" }}
                  />
                  <a
                    className="custom-button hidden"
                    href="https://maps.app.goo.gl/YPtkDXvC8B7stMf7A"
                    target="_blank">
                    {t("directions")}
                  </a>
                </div>

                <div className="map-container hidden">
                  <h3>{t("venue")}</h3>
                  <img
                    src="images_fonts/kentro.png"
                    alt=""
                    style={{ marginBottom: "30px", borderRadius: "20px" }}
                  />
                  <a
                    className="custom-button hidden"
                    href="https://maps.app.goo.gl/SVj9d5horAdn3rjy7"
                    target="_blank">
                    {t("directions")}
                  </a>
                </div>
              </div>

              {/* ‚úÖ RSVP Section */}
              <div className="container-wedding hidden" id="wedding-info">
                <div className="text-container">
                  <h2 className="text-center">{t("will_you_come")}</h2>
                  <div className="text-wrapper">
                    <div>
                      <h3 style={{ lineHeight: "1.7" }}>
                        {t("register_guests")}
                      </h3>
                      <button
                        className="rsrv-button hidden"
                        onClick={onReserveClick}>
                        {t("reservation")}
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              {/* üí∞ Bank Transfer Info */}
              <div className="bank-section">
                <h2
                  className="hidden"
                  style={{ marginBottom: "40px", lineHeight: "2.3" }}>
                  {t("gift_info")}
                </h2>
                <div className="bank-box hidden">
                  <div className="info-card">
                    <img
                      src="images_fonts/swissquote.png"
                      alt=""
                      style={{
                        marginTop: "-80px",
                        marginBottom: "-80px",
                        width: "200px",
                        height: "200px",
                      }}
                    />
                    <h3 translate="no">M.NATHANAILIDIS</h3>
                    <p translate="no">
                      CH1808781000136482400
                      <br />
                      SWQBCHZZXXX
                    </p>
                    <button
                      className="custom-button3 hidden"
                      style={{
                        marginBottom: "10px",
                      }}
                      onClick={() => copyToClipboard("CH1808781000136482400")}>
                      Copy IBAN
                    </button>
                    <button
                      className="custom-button3 hidden"
                      onClick={() => copyToClipboard("SWQBCHZZXXX")}>
                      Copy SWIFT/BIC
                    </button>
                  </div>
                </div>
              </div>

              {/* üìû Contact Info */}
              <div className="contact-section">
                <h2 className="hidden">üìû {t("contact")}</h2>
                <div className="contact-boxes">
                  <div className="contact-card hidden">
                    <h3>{t("maximos")}</h3>
                    <p>
                      <p>+41792881151</p>
                      <i className="fab fa-whatsapp fa-lg"></i>
                      <i className="fab fa-viber fa-lg"></i>
                    </p>
                  </div>
                  <div className="contact-card hidden">
                    <h3>{t("nina")}</h3>
                    <p>
                      <p>+41775349529</p>
                      <i className="fab fa-whatsapp fa-lg"></i>
                      <i className="fab fa-viber fa-lg"></i>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </section>
        );
      }

      function Reserve({ onBackClick, t }) {
        const [submitted, setSubmitted] = React.useState(false);
        const [guests, setGuests] = React.useState([{ name: "", surname: "" }]);

        React.useEffect(() => {
          window.scrollTo(0, 0);
        }, []);

        const handleGuestChange = (index, field, value) => {
          const newGuests = [...guests];
          newGuests[index][field] = value;
          setGuests(newGuests);
        };

        const addGuest = () => {
          setGuests([...guests, { name: "", surname: "" }]);
        };

        const resetForm = (formElement) => {
          formElement.reset();
          setGuests([{ name: "", surname: "" }]);
        };

        const handleSubmit = async (e) => {
          e.preventDefault();

          const formData = new FormData(e.target);

          try {
            const response = await fetch("guest.php", {
              method: "POST",
              body: formData,
            });

            if (response.ok) {
              setSubmitted(true);
              setTimeout(() => setSubmitted(false), 5000);
              resetForm(e.target);
            } else {
              alert(t("submission_error"));
            }
          } catch (error) {
            console.error("Error:", error);
            alert(t("submission_error"));
          }
        };

        return (
          <section className="main-page text-center">
            <link rel="stylesheet" href="resv.css" />

            <div className="reservation-card">
              <h2 className="reservation-title">{t("reservation")}</h2>
              <p className="reservation-subtitle1">{t("fill_form")}</p>
              <p className="reservation-subtitle2">{t("happy_to_see_you")}</p>

              <form
                className="reservation-form"
                onSubmit={handleSubmit}
                autoComplete="on">
                <div className="form-group">
                  <label htmlFor="name">{t("first_name")} *</label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    placeholder={t("first_name")}
                    required
                  />
                </div>

                <div className="form-group">
                  <label htmlFor="surname">{t("last_name")} *</label>
                  <input
                    type="text"
                    id="surname"
                    name="surname"
                    placeholder={t("last_name")}
                    required
                  />
                </div>

                <div className="form-group">
                  <label htmlFor="phone">{t("contact_phone")} *</label>
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    pattern="^\+?[0-9]{8,13}$"
                    placeholder={t("contact_phone")}
                    required
                  />
                </div>

                <div className="form-group">
                  <label htmlFor="email">{t("contact_email")} *</label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    placeholder={t("contact_email")}
                    required
                  />
                </div>

                <div className="dropdown-container">
                  <label htmlFor="coming">{t("will_you_attend")} *</label>
                  <select name="coming" id="coming" required>
                    <option value="" disabled selected>
                      {t("choice")}
                    </option>
                    <option value="yes">{t("of_course")}</option>
                    <option value="no">{t("cannot")}</option>
                  </select>
                </div>

                <div className="dropdown-container">
                  <label htmlFor="adults">{t("adults")}: *</label>
                  <select name="adults" id="adults" required>
                    <option value="" disabled selected>
                      {t("choice")}
                    </option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                  </select>
                </div>

                <div className="dropdown-container">
                  <label htmlFor="children">{t("children")}: *</label>
                  <select name="children" id="children" required>
                    <option value="" disabled selected>
                      {t("choice")}
                    </option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                  </select>
                </div>

                <div className="form-group">
                  <label htmlFor="message">{t("comment_label")}</label>
                  <textarea
                    id="message"
                    name="message"
                    rows="4"
                    style={{
                      width: "100%",
                      height: "100px",
                      resize: "none",
                    }}></textarea>
                </div>

                <div className="form-group">
                  <label>{t("guest_names")}</label>
                  {guests.map((guest, index) => (
                    <div key={index} className="form-group">
                      <input
                        type="text"
                        name={`guest_${index + 1}_name`}
                        placeholder={t("name")}
                        value={guest.name}
                        onChange={(e) =>
                          handleGuestChange(index, "name", e.target.value)
                        }
                      />
                      <input
                        type="text"
                        name={`guest_${index + 1}_surname`}
                        placeholder={t("surname")}
                        value={guest.surname}
                        onChange={(e) =>
                          handleGuestChange(index, "surname", e.target.value)
                        }
                      />
                    </div>
                  ))}

                  <button
                    type="button"
                    onClick={addGuest}
                    className="custom-button4 secondary"
                    style={{ marginBottom: "15px" }}
                    disabled={guests.length >= 10}>
                    {t("add_guest")}
                  </button>
                </div>

                {submitted && (
                  <div
                    style={{
                      backgroundColor: "#d4edda",
                      color: "#155724",
                      padding: "15px",
                      borderRadius: "10px",
                      marginBottom: "20px",
                      border: "1px solid #c3e6cb",
                    }}>
                    {t("reservation_success")}
                  </div>
                )}

                <div className="form-buttons">
                  <button type="submit" className="custom-button4">
                    {t("confirm")}
                  </button>
                  <button
                    type="button"
                    className="custom-button4 secondary"
                    onClick={onBackClick}>
                    {t("back")}
                  </button>
                </div>
              </form>
            </div>
          </section>
        );
      }

      function copyToClipboard(text) {
        navigator.clipboard.writeText(text).catch((err) => {
          console.error("Failed to copy: ", err);
        });
      }

      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>
